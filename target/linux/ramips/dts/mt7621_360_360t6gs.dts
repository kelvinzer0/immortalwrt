/dts-v1/;

/ {
    #address-cells = <1>;
    #size-cells = <1>;

    model = "360T6GS";
    compatible = "mediatek,mt7621-soc", "ralink,rt2880";

    aliases {
        led-boot = "/leds/system";
        led-failsafe = "/leds/system";
        led-upgrade = "/leds/system";
        serial0 = "/palmbus@1e000000/uartlite@c00";
    };

    chosen {
        bootargs = "console=ttyS0,115200";
    };

    clkctrl {
        compatible = "ralink,rt2880-clock";
        #clock-cells = <1>;
    };

    cpc@1fbf0000 {
        compatible = "mti,mips-cpc";
        reg = <0x1fbf0000 0x8000>;
    };

    cpuintc {
        compatible = "mti,cpu-interrupt-controller";
        interrupt-controller;
        #address-cells = <0>;
        #interrupt-cells = <1>;
    };

    cpus {
        #address-cells = <1>;
        #size-cells = <0>;

        cpu@0 {
            compatible = "mips,mips1004Kc";
            device_type = "cpu";
            reg = <0>;
        };
        cpu@1 {
            compatible = "mips,mips1004Kc";
            device_type = "cpu";
            reg = <1>;
        };
    };

    ethernet@1e100000 {
        compatible = "mediatek,mt7621-eth";
        reg = <0x1e100000 0x10000>;
        interrupt-parent = <3>;
        interrupts = <0 3 4>;
        clock-names = "fe", "ethif";
        clocks = <10 9 10 22>;

        mac@0 {
            compatible = "mediatek,eth-mac";
            reg = <0>;
            phy-mode = "rgmii";
            fixed-link {
                speed = <1000>;
                full-duplex;
                pause;
            };
            nvmem-cell-names = "mac-address";
        };

        mac@1 {
            compatible = "mediatek,eth-mac";
            reg = <1>;
            phy-mode = "rgmii";
            status = "disabled";
        };

        mdio-bus {
            #address-cells = <1>;
            #size-cells = <0>;

            switch@1f {
                compatible = "mediatek,mt7621";
                #interrupt-cells = <1>;
                interrupt-controller;
                interrupts = <0 23 4>;
                mediatek,mcm;

                ports {
                    port@0 { label = "lan3"; reg = <0>; status = "okay"; };
                    port@1 { label = "lan2"; reg = <1>; status = "okay"; };
                    port@2 { label = "lan1"; reg = <2>; status = "okay"; };
                    port@3 { label = "wan"; reg = <3>; status = "okay"; };
                    port@4 { label = "lan4"; reg = <4>; status = "disabled"; };
                    port@6 { label = "eth_fix"; reg = <6>; phy-mode = "rgmii"; fixed-link { speed = <1000>; full-duplex; pause; }; };
                };

                reg = <31>;
                reset-names = "mcm";
                resets = <5 2>;
            };
        };
    };

    keys {
        compatible = "gpio-keys";
        reset {
            gpios = <22 7 1>;
            label = "reset";
            linux,code = <0x198>;
        };
        wps {
            gpios = <22 6 1>;
            label = "wps";
            linux,code = <0x211>;
        };
    };

    leds {
        compatible = "gpio-leds";
        power {
            gpios = <22 13 1>;
            label = "red:power";
        };
        system {
            gpios = <22 15 0>;
            label = "green:system";
        };
    };

    nand@1e003000 {
        compatible = "mediatek,mt7621-nfc";
        reg = <0x1e003000 0x800 0x1e003800 0x800>;
        clocks = <14>;
        clock-names = "nfi_clk";
        status = "disabled";
    };

    palmbus@1e000000 {
        compatible = "palmbus";
        #address-cells = <1>;
        #size-cells = <1>;
        reg = <0x1e000000 0x100000>;
        ranges = <0 0 0x1e000000 0x100000>;

        gpio@600 {
            compatible = "mediatek,mt7621-gpio";
            gpio-controller;
            #gpio-cells = <2>;
            #interrupt-cells = <2>;
            gpio-ranges = <2 0 0 95>;
            interrupt-controller;
            interrupt-parent = <3>;
            interrupts = <0 12 4>;
        };

        uartlite@c00 {
            compatible = "ns16550a";
            reg = <0xc00 0x100>;
            reg-io-width = <4>;
            reg-shift = <2>;
            interrupt-parent = <3>;
            interrupts = <0 26 4>;
        };

        uartlite2@d00 {
            compatible = "ns16550a";
            reg = <0xd00 0x100>;
            reg-io-width = <4>;
            reg-shift = <2>;
            interrupt-parent = <3>;
            interrupts = <0 27 4>;
        };

        uartlite3@e00 {
            compatible = "ns16550a";
            reg = <0xe00 0x100>;
            reg-io-width = <4>;
            reg-shift = <2>;
            interrupt-parent = <3>;
            interrupts = <0 28 4>;
        };

        spi@b00 {
            compatible = "ralink,mt7621-spi";
            reg = <0xb00 0x100>;
        };
    };

    pcie@1e140000 {
        compatible = "mediatek,mt7621-pci";
        #address-cells = <3>;
        #interrupt-cells = <1>;
        reg = <0x1e140000 0x100 0x1e142000 0x100 0x1e143000 0x100 0x1e144000 0x100>;
        status = "okay";
    };
};
